(this["webpackJsonpbulkvoidtoolxero-frontend"]=this["webpackJsonpbulkvoidtoolxero-frontend"]||[]).push([[0],{19:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return c}));var n=e.window.localStorage,r=function(e){return n.getItem(e)},o=function(e,t){null===t?n.removeItem(e):n.setItem(e,t)},c=function(e){return n.removeItem(e)}}).call(this,a(73))},201:function(e,t,a){e.exports=a(394)},206:function(e,t,a){},394:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),l=a(46),i=(a(206),a(52)),s=a(395),u=a(56),d=s.a.Header,m=function(e){var t=e.currentPath;return r.a.createElement(s.a,{className:"layout"},r.a.createElement(d,null,r.a.createElement("div",{className:"logo"}),r.a.createElement(u.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:[t]},r.a.createElement(u.a.Item,{key:"/void"},r.a.createElement(i.b,{to:"/void"},"Void Invoices")),r.a.createElement(u.a.Item,{key:"/about"},r.a.createElement(i.b,{to:"/about"},"About")),r.a.createElement(u.a.Item,{key:"/help"},r.a.createElement(i.b,{to:"/help"},"Help")))))},p=a(23),h=a.n(p),y=a(34),f=a(402),v=a(19),g=a(174),E=a(175),b=a(199),k=a(195),w=a(137),x=a.n(w),I=a(398),O=a(397),C=a(396),j=a(400),S=a(401),_=a(399),A=function(){return r.a.createElement("div",null,r.a.createElement(_.a,{message:"We encountered an error!",description:"Please click below to reload the main page. It's likely your API key expired or the connection to your organisation was lost.",type:"error"}),r.a.createElement("a",{href:"/"},"Back home"))},N=[{title:"Invoice Number",dataIndex:"InvoiceNumber"},{title:"Date",dataIndex:"DateString",render:function(e){return r.a.createElement(x.a,{format:"LL"},e)}},{title:"Due Date",dataIndex:"DueDateString",render:function(e){return r.a.createElement(x.a,{format:"LL"},e)}},{title:"Contact",dataIndex:["Contact","Name"]},{title:"Total",dataIndex:"Total"},{title:"Currency",dataIndex:"CurrencyCode"}],L=function(e){Object(b.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={selectedRowKeys:[],loading:!1,invoiceData:[],invoiceMonth:"2020-01",error:!1,voidLoading:!1},e.start=function(){e.setState({loading:!0}),h.a.get("/invoices?date=".concat(e.state.invoiceMonth)).then((function(t){console.log(t.data),e.setState({loading:!1,invoiceData:t.data})})).catch((function(t){e.setState({loading:!1,error:!0}),Object(v.b)("oauth_token_secret")}))},e.disconnect=function(){Object(v.b)("oauth_token"),Object(v.b)("oauth_expires_at"),Object(v.b)("oauth_token_secret")},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.onDateChange=function(t,a){e.setState({invoiceMonth:a})},e.void=function(){e.setState({voidLoading:!0}),h.a.create({timeout:6e5}).post("/void",{void:e.state.selectedRowKeys}).then((function(t){"Success"===t.data?(e.setState({voidLoading:!1}),I.a.open({message:"Invoices Voided Successfully",description:"All invoices were voided without any issues.",icon:r.a.createElement(j.a,{style:{color:"#108ee9"}})})):(e.setState({voidLoading:!1}),I.a.open({message:"We encountered a problem",description:"Please see the error response for more information: InvoiceID: ".concat(t.data.error),icon:r.a.createElement(S.a,{style:{color:"#FF0000"}})}))})).catch((function(t){console.log("hit the exception frontend"),e.setState({voidLoading:!1,error:!0}),Object(v.b)("oauth_token_secret")}))},e}return Object(E.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.loading,n=t.voidLoading,o=t.selectedRowKeys,c={selectedRowKeys:o,onChange:this.onSelectChange},l=o.length>0;return r.a.createElement("div",null,r.a.createElement("div",{style:{marginBottom:16}},r.a.createElement(y.a,{type:"primary",onClick:this.start,disabled:!1,loading:a},"Retrieve Invoices"),r.a.createElement(y.a,{style:{marginLeft:8},danger:!0,type:"secondary",onClick:function(){e.disconnect(),window.location.reload()},disabled:!1},"Disconnect from Xero"),r.a.createElement(O.a,{autoFocus:!0,placeholder:"2020-01",style:{marginLeft:8},onChange:this.onDateChange,picker:"month"}),r.a.createElement("span",{style:{marginLeft:8}},l?"Selected ".concat(o.length," items"):""),l?r.a.createElement(y.a,{style:{marginLeft:8},danger:!0,type:"primary",onClick:this.void,loading:n},"Void ".concat(o.length," items")):null),this.state.error?r.a.createElement(A,null):r.a.createElement(C.a,{rowKey:"InvoiceID",rowSelection:c,columns:N,dataSource:this.state.invoiceData,pagination:{pageSize:100}}))}}]),a}(r.a.Component),D=s.a.Content,T=s.a.Footer,R=function(){var e=Object(v.a)("oauth_token_secret");return r.a.createElement(s.a,{className:"layout"},r.a.createElement(D,{style:{padding:"0 50px"}},r.a.createElement("div",{className:"site-layout-content"},null===e?r.a.createElement("div",null,r.a.createElement("h3",null,"Please click below to connect with your Xero organisation"),r.a.createElement("span",{onClick:function(){return h.a.get("/connect").then((function(e){return window.location.assign(e.data)}))}},r.a.createElement(y.a,{type:"primary",shape:"round",size:"large"},r.a.createElement(f.a,null),"Sign in to Xero"))):r.a.createElement("div",null,r.a.createElement("p",null,"Authenticated"),r.a.createElement(L,null)))),r.a.createElement(T,{style:{textAlign:"center"}},"Created by Leslie A. 2020"))},F=s.a.Content,K=s.a.Footer,P=function(){return r.a.createElement(s.a,{className:"layout"},r.a.createElement(F,{style:{padding:"0 50px"}},r.a.createElement("div",{className:"site-layout-content"},"I am the about page")),r.a.createElement(K,{style:{textAlign:"center"}},"Created by Leslie A. 2020"))},B=s.a.Content,W=s.a.Footer,z=function(){return r.a.createElement(s.a,{className:"layout"},r.a.createElement(B,{style:{padding:"0 50px"}},r.a.createElement("div",{className:"site-layout-content"},r.a.createElement("p",null,"I'm the help page"))),r.a.createElement(W,{style:{textAlign:"center"}},"Created by Leslie A. 2020"))},M=a(192),V=s.a.Content,X=s.a.Footer,H=function(e){var t=e.search;return h.a.get("/api/callback".concat(t)).then((function(t){Object(v.c)("oauth_expires_at",t.data.oauth_expires_at),Object(v.c)("oauth_token",t.data.oauth_token),Object(v.c)("oauth_token_secret",t.data.oauth_token_secret),e.history.push("/")})),r.a.createElement(s.a,{className:"layout"},r.a.createElement(V,{style:{padding:"0 50px"}},r.a.createElement("div",{className:"site-layout-content"},r.a.createElement(M.a,{tip:"Authenticating..."}))),r.a.createElement(X,{style:{textAlign:"center"}},"Created by Leslie A. 2020"))},J=a(57),G=a.n(J),$=a(112),q=a(197),Q=a(198),U=a(83),Y=function(){return"DELETE_TRANSACTION"},Z=function(){return"ADD_TRANSACTION"},ee=function(){return"GET_TRANSACTIONS"},te=function(){return"TRANSACTION_ERROR"},ae=function(e,t){switch(t.type){case ee:return Object(U.a)({},e,{loading:!1,transactions:t.payload});case Y:return Object(U.a)({},e,{transactions:e.transactions.filter((function(e){return e._id!==t.payload}))});case Z:return Object(U.a)({},e,{transactions:[].concat(Object(Q.a)(e.transactions),[t.payload])});case te:return Object(U.a)({},e,{error:t.payload});default:return e}},ne="/api/v1/transactions",re={transactions:[],error:null,loading:!0},oe=Object(n.createContext)(re),ce=function(e){var t=e.children,a=Object(n.useReducer)(ae,re),o=Object(q.a)(a,2),c=o[0],l=o[1];function i(){return(i=Object($.a)(G.a.mark((function e(){var t;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get(ne);case 3:t=e.sent,l({type:ee,payload:t.data.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function s(){return(s=Object($.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.delete("".concat(ne,"/").concat(t));case 3:l({type:Y,payload:t}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l({type:te,payload:e.t0.respose.data.error});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function u(){return(u=Object($.a)(G.a.mark((function e(t){var a,n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json"}},e.prev=1,e.next=4,h.a.post(ne,t,a);case 4:n=e.sent,l({type:Z,payload:n.data.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),l({type:te,payload:e.t0.respose.data.error});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return r.a.createElement(oe.Provider,{value:{transactions:c.transactions,error:c.error,loading:c.loading,getTransactions:function(){return i.apply(this,arguments)},deleteTransaction:function(e){return s.apply(this,arguments)},addTransaction:function(e){return u.apply(this,arguments)}}},t)};var le=function(){var e=Object(l.h)(),t=Object(l.g)();return r.a.createElement(ce,null,r.a.createElement(m,{currentPath:e.pathname}),r.a.createElement(l.d,null,r.a.createElement(l.a,{exact:!0,from:"/",to:"/void"}),r.a.createElement(l.b,{path:"/void"},r.a.createElement(R,null)),r.a.createElement(l.b,{path:"/about"},r.a.createElement(P,null)),r.a.createElement(l.b,{path:"/help"},r.a.createElement(z,null)),r.a.createElement(l.b,{path:"/callback"},r.a.createElement(H,{history:t,search:e.search}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,null,r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[201,1,2]]]);
//# sourceMappingURL=main.1e93d84f.chunk.js.map